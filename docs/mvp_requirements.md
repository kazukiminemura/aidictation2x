# 音声入力アプリ MVP 要件定義書

## 1. 文書情報
- 文書名: 音声入力アプリ MVP 要件定義書
- 作成日: 2026-02-15
- 対象フェーズ: 1. MVPの機能とテスト
- 前提: 完全ローカル動作（音声データ・文字起こし結果を外部送信しない）

## 2. MVP スコープ
MVPでは以下5機能のみを対象とする。
1. AI音声入力（Voice-to-Text）
2. 自動音声認識（ASR）
3. AI自動編集（誤字修正・整形）
4. フィラーワード除去（えーと、あの等）
5. 話し癖の自動除去

## 3. 用語定義
- ASR: 音声をテキストへ変換する処理。
- フィラーワード: 意味を持たない間投詞やつなぎ語（例: 「えーと」「あの」）。
- 話し癖: 冗長な口語パターン（例: 「っていうか」「そのー」）。

## 4. 機能要件

### FR-01 AI音声入力（Voice-to-Text）
- ユーザーはアプリ内で録音開始/停止を操作できること。
- 録音終了後、同一セッション内で文字起こし処理が自動実行されること。
- 変換後テキストは編集可能なテキスト領域に表示されること。

### FR-02 自動音声認識（ASR）
- ローカル推論エンジンで日本語音声を文字起こしできること。
- 最低入力条件: 16kHz以上、モノラル音声を受け付けること。
- 出力はUTF-8テキストで保持すること。

### FR-03 AI自動編集（誤字修正・整形）
- ASR結果に対して自動で誤字修正を実行できること。
- 文末句読点、改行、不要な連続空白を整形できること。
- 元テキスト（ASR生出力）を保持し、編集後テキストとの差分確認が可能であること。

### FR-04 フィラーワード除去
- 設定でON/OFFを切り替えられること。
- 指定語彙リスト（初期値）に基づいて除去できること。
- 除去処理により文意が大きく変わる場合に備え、除去前後の比較が可能であること。

### FR-05 話し癖の自動除去
- 設定でON/OFFを切り替えられること。
- 話し癖パターン（初期ルール）に基づいて簡易正規化できること。
- 過剰削除を防ぐため、削除対象ルールは設定ファイルで調整可能であること。

## 5. 非機能要件

### NFR-01 ローカル完結
- 音声データ、推論結果、編集結果を外部APIへ送信しないこと。
- ネットワーク未接続環境でも主要機能が利用可能であること。

### NFR-02 性能
- 30秒音声の処理時間（ASR+編集）を、基準環境で60秒以内とする。
- UI操作（録音開始/停止、結果表示）がフリーズしないこと。

### NFR-03 可用性・復旧性
- 失敗時（モデル未ロード/音声デバイス未検出）は原因をエラーメッセージで表示すること。
- アプリ異常終了時も直近の変換テキストをローカル一時保存できること。

### NFR-04 保守性
- フィラーワード辞書と話し癖ルールを外部設定ファイルで管理できること。
- ログレベル（INFO/ERROR）を切り替え可能であること。

## 6. 画面・操作要件（最小）
- 録音ボタン: 開始/停止トグル。
- テキスト表示領域: ASR結果および編集結果を表示。
- 処理オプション: 「自動編集」「フィラーワード除去」「話し癖除去」ON/OFF。
- 比較表示: 生テキストと最終テキストを切り替えまたは並列表示。

## 7. データ要件
- 入力: マイク音声（リアルタイムまたは録音ファイル）。
- 中間データ: ASR生テキスト、編集後テキスト、処理ログ。
- 永続化: 直近N件（初期値10件）のローカル履歴保存。

## 8. 対象外（MVPでは実施しない）
- クラウド同期、チーム機能、分析ダッシュボード。
- 多言語最適化（初期MVPは日本語優先）。
- 高度な音声コマンド、外部アプリ連携、モバイル版最適化。

## 9. 受け入れ基準（MVP）
1. 録音から文字起こし結果表示までをローカル環境のみで完了できる。
2. 自動編集ON時に誤字修正と整形が適用される。
3. フィラーワード除去ON時に初期辞書対象語が除去される。
4. 話し癖除去ON時に初期ルール対象表現が簡易正規化される。
5. ON/OFF設定に応じて各処理が適切に有効/無効化される。
6. 生テキストと最終テキストを比較可能である。
7. オフライン状態でも上記機能が利用できる。

## 10. テスト観点（MVP）
- 正常系:
  - 録音開始/停止、ASR実行、編集適用、結果表示。
  - ON/OFF組み合わせ（2^3パターン）で処理分岐確認。
- 異常系:
  - マイク未接続、権限拒否、空音声、極端な短音声。
  - モデルロード失敗時のエラーハンドリング。
- 品質:
  - 代表サンプルで誤字修正・除去の過剰適用有無を確認。
  - 処理時間計測（30秒音声基準）。

